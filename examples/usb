#! /usr/bin/env coffee

# this little program lets you see the results of calling the
# usb module's various methods.

program = require('commander')

program
  .option('-k, --fake', 'use fake usb module')
  .option('-f, --find', 'usb.findByIds()')
  .option('--itf <n>', 'device.interface(n)', parseInt)
  .version('0.0.1')
  .parse(process.argv)

if program.fake
  usb = require('../fake/usb')
  usb.configure { findDevice: true }
else
  usb = require('usb')

dev = usb.findByIds(0x16d0, 0x06f9)
dev.open()

if program.find
  console.log dev


if program.itf?
  itf = dev.interface(program.itf)
  console.log program.itf, itf

